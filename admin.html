<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin panel â€” 28-maktab</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="container">

<div class="header">
  <div class="logo">28</div>
  <h2>Admin panel</h2>
  <p>ðŸ“Š Saqlangan maÊ¼lumotlar</p>
</div>

<div class="card">
  <h3>ðŸ“… Sanalar</h3>
  <div id="dates"></div>
</div>

<div class="card">
  <h3>ðŸ“„ Batafsil maÊ¼lumot</h3>
  <pre id="info">Sanani tanlang</pre>
  <div class="actions" id="actions" style="display:none;">
    <button class="btn-del" onclick="deleteDay()">ðŸ—‘ Oâ€˜chirish</button>
  </div>
</div>

</div>

<script>
const datesBox=document.getElementById("dates");
const info=document.getElementById("info");
const actions=document.getElementById("actions");
let current=null;

function loadDates(){
  datesBox.innerHTML="";
  if(localStorage.length===0){
    datesBox.innerHTML="<p>MaÊ¼lumot yoâ€˜q</p>";
    return;
  }
  let keys=[];
  for(let i=0;i<localStorage.length;i++) keys.push(localStorage.key(i));
  keys.sort((a,b)=>new Date(b)-new Date(a));
  keys.forEach(k=>{
    datesBox.innerHTML+=`
      <div class="date" onclick="show('${k}')">
        <span>${k}</span>
        <span class="badge">Koâ€˜rish</span>
      </div>`;
  });
}

function show(k){
  current=k;
  const data=JSON.parse(localStorage.getItem(k));
  let out=`ðŸ“… Sana: ${k}\n\n`;
  for(let s in data) out+=`${s}-sinf â†’ ${data[s]}\n`;
  info.innerText=out;
  actions.style.display="block";
}

function deleteDay(){
  if(confirm("MaÊ¼lumot oâ€˜chirilsinmi?")){
    localStorage.removeItem(current);
    current=null;
    info.innerText="Oâ€˜chirildi";
    actions.style.display="none";
    loadDates();
  }
}

loadDates();
</script>

</body>
</html>
